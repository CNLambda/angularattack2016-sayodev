{"version":3,"file":"card.component.js","sourceRoot":"","sources":["card.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, EventEmitter, Input, Output } from '@angular/core';\nimport { TextCardComponent } from '../text-card';\nimport { LinkCardComponent } from '../link-card';\nimport { ImageCardComponent } from '../image-card';\nimport { FileCardComponent } from '../file-card';\nimport { HTTP_PROVIDERS } from '@angular/http';\nimport { Http, Response} from '@angular/http';\n//import { CanvasCardComponent } from '../canvas-card';\n\n@Component({\n    moduleId: module.id,\n    selector: 'card',\n    templateUrl: 'card.component.html',\n    styleUrls: ['card.component.css'],\n    directives: [TextCardComponent, LinkCardComponent, ImageCardComponent, FileCardComponent],\n    providers:  [ HTTP_PROVIDERS ]\n})\nexport class CardComponent implements OnInit {\n\n    @Input() data: any;\n    @Input() id: number;\n    @Output() on_delete: EventEmitter<void> = new EventEmitter<void>();\n    public title: string;\n    public type: string;\n    public color: string;\n    public editing: boolean;\n    public content: any;\n\n    constructor(private http: Http) {\n        this.title = '';\n        this.type = 'text';\n        this.color = 'white';\n        this.editing = false;\n        this.content = '...';\n    }\n\n    ngOnInit() {\n        this.title = this.data.title;\n        this.type = this.data.type;\n        this.content = this.data.content;\n        this.color = this.data.color;\n    }\n\n    changeColor(new_color) {\n        this.color = new_color;\n        \n        this.http.post(\"https://angularattack2016-sayodev.herokuapp.com/board/\" + this.get_id() + \"/card/\" + this.data.server_id + \"/edit\", JSON.stringify({title: this.title, content: this.content, color: this.color}))\n          .subscribe(\n                data => {\n                },\n                err => console.log(err.json().message),\n                () => console.log('card done...')\n           );\n    }\n    \n    on_change(content: any) {\n        this.content = content;\n    }\n\n    toggle_edit() {\n        this.editing = !this.editing;\n        \n        if (!this.editing) \n        {\n            this.http.post(\"https://angularattack2016-sayodev.herokuapp.com/board/\" + this.get_id() + \"/card/\" + this.data.server_id + \"/edit\", JSON.stringify({title: this.title, content: this.content, color: this.color}))\n              .subscribe(\n                    data => {\n                    },\n                    err => console.log(err.json().message),\n                    () => console.log('card done...')\n               );\n        }\n    }\n    \n    get_id() : string {\n        let x = location.href;\n        let x2: string[] = x.split(\"/\");\n        if (x2[x2.length - 1] == \"\") {\n            return x2[x2.length - 2];\n        } else {\n            return x2[x2.length - 1];\n        }\n    }\n\n    delete() {\n        console.log(\"Deleted card \" + this.data.server_id);\n        this.http.post(\"https://angularattack2016-sayodev.herokuapp.com/board/\" + this.get_id() + \"/card/\" + this.data.server_id + \"/delete\", JSON.stringify({}))\n          .subscribe(\n                data => {\n                },\n                err => console.log(err.json().message),\n                () => console.log('card done...')\n           );\n        this.on_delete.emit(null);\n    }\n    \n    up() {\n        console.log(\"Priority up: \" + this.data.server_id);\n        this.http.post(\"https://angularattack2016-sayodev.herokuapp.com/board/\" + this.get_id() + \"/card/\" + this.data.server_id + \"/up\", JSON.stringify({}))\n          .subscribe(\n                data => {\n                },\n                err => console.log(err.json().message),\n                () => console.log('card done...')\n           );\n    }\n    \n    down() {\n        console.log(\"Priority up: \" + this.data.server_id);\n        this.http.post(\"https://angularattack2016-sayodev.herokuapp.com/board/\" + this.get_id() + \"/card/\" + this.data.server_id + \"/down\", JSON.stringify({}))\n          .subscribe(\n                data => {\n                },\n                err => console.log(err.json().message),\n                () => console.log('card done...')\n           );\n    }\n\n}\n"]}